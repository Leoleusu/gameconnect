<div class="text-center pt-3 mt-3">
  <%= image_tag @user.get_image(150,150),class: "bd-placeholder-img img-fluid d-block mx-auto border border-dark rounded-circle" %>
  <h2 class="pb-1 mx-auto"><%= @user.name %></h2>
  <p><%= @user.introduction %></p>
</div>
<div class="col-12 col-lg-9">
    <button type="button" class="btn text-dark offset-md-3" data-toggle="modal" data-target="#modal-follow">
      <h6 class="text">フォロー  <%= @user.followings.count %></h6>
    </button>
    <%= render 'public/shared/follow_list',users: @user.followings %>
    <button type="button" class="btn text-dark mr-auto" data-toggle="modal" data-target="#modal-follower">
      <h6 class="text">フォロワー  <%= @user.followers.count %></h6>
    </button>
    <%= render 'public/shared/follower_list',users: @user.followers %>
      <% if current_user == @user %>
        <%= link_to edit_public_user_path(@user),class: "btn btn-outline-secondary btn-sm ml-auto" do %>
          <i class="fas fa-wrench"></i> 編集する
        <% end %>
      <% else %>
        <% if current_user.following?(@user) %>
          <%= link_to "フォローを外す",public_user_relationships_path(@user.id),method: :delete, class: "btn btn-outline-secondary btn-sm ml-auto" %>
        <% else %>
          <%= link_to "フォローする",public_user_relationships_path(@user.id),method: :post, class: "btn btn-outline-secondary btn-sm no-wrapper ml-auto" %>
        <% end %>
      <% end %>
  </div>
  <h3 class="text-center pt-4">投稿一覧</h3>
  <% if @posts.exists? %>
    <% @posts.each do |po| %>
      <div class="d-flex justify-content-center pt-3 ml-2 border-top">
        <div class="col-4 col-md-2 offset-md-1">
          <%= image_tag po.user.get_image(90,90),class: "img-fluid  border border-dark rounded-circle" %>
        </div>
        <div class="col text-left">
          <h6 class="pb-2 text-dark"><%= po.user.name %></h6>
          <%= link_to public_post_path(po.id),class: "text-dark" do %>
            <%= po.body %>
            <div class="form-inline">
              <p class="small text-muted text-right d-flex align-items-center pt-2">
              <i class="far fa-comment"></i>
              <% if po.comment.count != 0 %>
                <%= po.comment.count %>
              <% end %>
              </p>
              <% if po.favorited_by?(current_user) %>
              <!--いいね済みならdestroyアクションを呼び出す-->
                <%= link_to public_post_favorites_path(po.id),method: :delete do %>
                  <p style="color:red;" class="small text-muted text-right pl-3 d-flex align-items-center pt-2">❤</p>
                <% end %>
              <% else %>
              <!--いいねしていない場合はcreateアクションを呼び出す-->
                <%= link_to public_post_favorites_path(po.id), method: :post do %>
                  <p class="small text-muted text-right pl-3 d-flex align-items-center pt-2">♡︎</p>
                <% end %>
              <% end %>
          </div>
        <% end %>
      </div>
    </div>
    <% end %>
  <% else %>
    <div class="col-12 p-5">
      <p class="text-muted text-center">まだ何も投稿していないよ！</p>
    </div>
  <% end %>
</div>