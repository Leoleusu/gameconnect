<h1 class="text-center">ユーザーページ</h1>
  <div class = "col-6 d-flex offset-md-3 p-2 border-top">
    <div class="col-md-3 flex-column">
      <%= image_tag @user.get_image(150,150),class: "bd-placeholder-img img_responsive" %>
      <% if current_user == @user %>
        <%= link_to "編集する",edit_public_user_path(@user),class: "btn btn-success mt-3 mx-auto" %>
      <% else %>
        <% if current_user.following?(@user) %>
          <%= link_to "フォローを外す",public_user_relationships_path(@user.id),method: :delete, class: "btn btn-outline-secondary mt-3 mx-auto" %>
        <% else %>
          <%= link_to "フォローする",public_user_relationships_path(@user.id),method: :post, class: "btn btn-outline-secondary text-nowrap mt-3 mx-auto" %>
        <% end %>
      <% end %>
    </div>
    <div class="col-md-8">
      <div class="text-center no-wrapper">
        <h3 class="pt-3"><%= @user.name %></h3>
        <p class="pt-1"><%= @user.introduction %></p>
      </div>
    </div>
  </div>
<div class="row-fluid">
  <div class="offset-md-6 col-6">
    <button type="button" class="btn text-dark " data-toggle="modal" data-target="#modal-follow">
      <h4 class="text">フォロー  <%= @user.followings.count %></h4>
    </button>
      <%= render 'public/shared/follow_list',users: @user.followings %>
    <button type="button" class="btn text-dark " data-toggle="modal" data-target="#modal-follower">
      <h4 class="text">フォロワー  <%= @user.followers.count %></h4>
    </button>
      <%= render 'public/shared/follower_list',users: @user.followers %>
  </div>
</div>
<div class="row-fluid">
  <h3 class="text-center pt-4">投稿一覧</h3>
    <div class="offset-md-3">
      <% if @posts.exists? %>
        <% @posts.each do |po| %>
          <div class="row-fluid justify-content-center d-flex offset-md-2 p-2 border-top">
            <div class="col-2 offset-">
              <%= image_tag po.user.get_image(90,90) %>
            </div>
            <div class="col text-left">
              <h6 class="pb-2 text-dark"><%= po.user.name %></h6>
              <%= link_to public_post_path(po.id),class: "text-dark" do %>
                <%= po.body %>
                <div class="form-inline">
                  <p class="small text-muted text-right d-flex align-items-center pt-2">
                  <i class="far fa-comment"></i>
                  <% if po.comment.count != 0 %>
                    <%= po.comment.count %>
                  <% end %>
                  </p>
                  <% if po.favorited_by?(current_user) %>
                  <!--いいね済みならdestroyアクションを呼び出す-->
                    <%= link_to public_post_favorites_path(po.id),method: :delete do %>
                      <p style="color:red;" class="small text-muted text-right pl-3 d-flex align-items-center pt-2">❤</p>
                    <% end %>
                  <% else %>
                  <!--いいねしていない場合はcreateアクションを呼び出す-->
                    <%= link_to public_post_favorites_path(po.id), method: :post do %>
                      <p class="small text-muted text-right pl-3 d-flex align-items-center pt-2">♡︎</p>
                    <% end %>
                  <% end %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="col-12 p-5">
        <p class="text-muted text-center">まだ何も投稿していないよ！</p>
      </div>
    <% end %>
    </div>
  </div>
